<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session c57b46a4-7401-4592-a394-4ccd5a9a146d (2025-09-03 10:34Z) -->

# Tech stack and app structure overview (2025-09-03 10:34Z)

_**User (2025-09-30 08:51Z)**_

Explain the techstack o this app and the genereal structure

---

_**Agent (model gpt-5, mode Agent)**_



---

I'll scan key files (package.json, config, pages, API, lib) to accurately describe the tech stack and structure.

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/victorsvedberg/Sites/utelektiongeneratorn/package.json</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/victorsvedberg/Sites/utelektiongeneratorn/tsconfig.json</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/victorsvedberg/Sites/utelektiongeneratorn/next.config.ts</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/victorsvedberg/Sites/utelektiongeneratorn/app/layout.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/victorsvedberg/Sites/utelektiongeneratorn/app/page.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/victorsvedberg/Sites/utelektiongeneratorn/app/api/generate/route.ts</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/victorsvedberg/Sites/utelektiongeneratorn/app/survey/page.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/victorsvedberg/Sites/utelektiongeneratorn/app/survey/results/page.tsx</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/victorsvedberg/Sites/utelektiongeneratorn/lib/prompts.ts</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/victorsvedberg/Sites/utelektiongeneratorn/lib/utils.ts</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/victorsvedberg/Sites/utelektiongeneratorn/app/globals.css</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/victorsvedberg/Sites/utelektiongeneratorn/postcss.config.mjs</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/victorsvedberg/Sites/utelektiongeneratorn/eslint.config.mjs</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Users/victorsvedberg/Sites/utelektiongeneratorn/README.md</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
**Explaining tech stack and structure**

I need to provide a clear explanation of the tech stack and general structure. The assistant has accessed various files, and I need to prepare a status update at the top, following the required format. I can keep my explanation concise and include bullet points for clarity. The user is Swedish and asked for details in English, despite some typos. I’ll format my response using Markdown headings as instructed, focusing on a high-level overview.
**Describing the app flow**

I need to outline the general flow of the app in a clear manner. First, the user navigates to the start page, which sets `localStorage` for 'surveyData' and then redirects to the survey. During the survey, the user's answers are saved, and once completed, they're sent to the results page. This page reads 'surveyData,' posts to the API using JSON, and the server generates responses using OpenAI. I’ll also touch upon the repository structure and include bullet points for clarity, but I won’t go too deep into hypotheticals or heavy editorializing.
**Summarizing app features**

I should explain that the app uses the App Router and has route handlers located in `app/api`. It implements multi-step streaming with `ReadableStream` and uses SSE style 'data:' lines. While a code reference could be useful to demonstrate the streaming type, it isn't strictly necessary. I need to include a status update at the beginning, and I can skip the todo list tool since this is just an informational request. However, I will keep the necessary elements concise to avoid overloading the user.
**Summarizing requirements**

I need to remember that at the end of my response, I should provide a summary according to the specified guidelines. For basic inquiries, I can skip the summary entirely; however, if the user asks for information, I’ll summarize the answer without explaining my search process, since that could be redundant. I should use concise headings and bullet points to ensure clarity, while making sure to avoid repetition and keep everything tight and focused!
**Crafting the response**

I'll start with a status update: “I scanned the key files and I’m summarizing the tech stack and structure.” 

Then, I'll include headings for clarity:

### Tech Stack
- Next.js 15 (App Router, Route Handlers)
- React 19 + TypeScript 5
- Tailwind CSS v4 and related plugins
- Markdown rendering: react-markdown + remark-gfm
- Icons: lucide-react
- OpenAI SDK 5
- ESLint 9 + eslint-config-next
- Fonts setup via next/font and @font-face
- Build scripts: next dev/build/start

### Project Structure
- Overview of app organization and key files

### Data Flow/User Journey
- User interactions and storage transitions

### Environment & Deployment
- Notes on API requirements and deployment options

I’ll avoid code blocks and references, keeping everything concise, and finish with a short bullet summary.</details></think>

---

I scanned the key files and configs. I’ll summarize the tech stack and how the app is structured and flows.

### Tech stack
- Next.js 15 (App Router) with Route Handlers under `app/api/*`
- React 19 + TypeScript 5
- Tailwind CSS v4 (via `@tailwindcss/postcss`) + utility helpers: `tailwind-merge`, `clsx`, `class-variance-authority`, `tw-animate-css`
- Markdown rendering: `react-markdown` + `remark-gfm`
- Icons: `lucide-react`
- OpenAI SDK 5 for server-side text generation (`OPENAI_API_KEY` required)
- Linting: ESLint 9 (flat config) with `eslint-config-next`
- Fonts: `next/font` (Geist) + custom `@font-face` for Souvenir and Inter Variable
- Scripts: `next dev`, `next build`, `next start`

### Project structure (high level)
- `app/`
  - `layout.tsx`: Root layout, sets fonts and global styles.
  - `globals.css`: Tailwind setup, CSS variables, custom animations, font-face declarations.
  - `page.tsx`: Start/landing page. CTA sets an empty `surveyData` in `localStorage` and routes to `/survey`.
  - `survey/page.tsx`: Client-side survey; 4 multiple-choice steps; persists selections to `localStorage`; progress bar and transitions; routes to `/survey/results` on completion.
  - `survey/results/page.tsx`: Reads `surveyData`, POSTs to API, consumes server-sent event-style stream, shows stepwise loader, renders final Markdown with `react-markdown`, offers download and “new lesson”.
  - `api/generate/route.ts`: Server endpoint. Validates payload, orchestrates 4 steps (concept → curriculum → safety → compile), calls OpenAI (responses.create), and streams progress and final document to the client as `text/event-stream`.
- `lib/`
  - `prompts.ts`: Types (`SurveyData`, `LessonConcept`) and prompt builders for each step; `compileFinalDocument` returns the final Markdown.
  - `utils.ts`: `cn` helper combining `clsx` + `tailwind-merge`.
- Config: `tsconfig.json` (path alias `@/*`), `next.config.ts` (default), `postcss.config.mjs` (Tailwind plugin), `eslint.config.mjs` (flat config).
- Assets: `public/assets/` for background image and font files.

### Data flow and user journey
- Landing (`/`): User clicks CTA → sets `{}` in `localStorage.surveyData` → navigates to `/survey`.
- Survey (`/survey`): Each answer updates `localStorage.surveyData`. On last answer → navigate to `/survey/results`.
- Results (`/survey/results`):
  - Reads `localStorage.surveyData`.
  - POSTs JSON to `/api/generate`.
  - Consumes streamed `data: {type:'progress'|'complete'|'error'}` messages.
  - Updates UI per step; on `complete` renders the returned Markdown; enables download and restart actions.

### Notable implementation details
- Streaming: custom `ReadableStream` on the server pushes JSON events prefixed with `data:`, with `Content-Type: text/event-stream`.
- OpenAI: uses the Responses API with per-step reasoning/verbosity; prompts and JSON shaping handled in `lib/prompts.ts`.
- Styling: Tailwind-first with custom CSS variables and animations in `app/globals.css`. Fonts handled via `next/font` plus manual `@font-face` for non-Google fonts.

- The app uses Next.js App Router client components for interactive pages and a server Route Handler for AI generation.

---

_**User (2025-09-30 08:51Z)**_

So to summarise the texhstack in a sentence for a client, on high level overview could sound like?

---

_**Agent (model gpt-5, mode Agent)**_



---

A modern Next.js + React (TypeScript) web app styled with Tailwind CSS that integrates OpenAI to generate and stream lesson plans to the UI.

---

